<?php 
$title = array_key_exists('title', $this->vars)? 'IEM :: '. $this->title : 'Iowa Environmental Mesonet';
// Page should refresh
$refresh = "";
if (array_key_exists('refresh', $this->vars)){
  $refresh = sprintf("<meta http-equiv=\"refresh\" content=\"%s;\">",
    $this->refresh);
}
$headextra = array_key_exists('headextra', $this->vars)? $this->headextra : '';
if (array_key_exists('iemss', $this->vars)){
  $headextra .= <<<EOF
<link rel="stylesheet" href="/vendor/openlayers/3.9.0/ol.css" type="text/css">
EOF;
}
$bodyextra = array_key_exists('bodyextra', $this->vars)? ' '. $this->bodyextra : '';
$twimage = array_key_exists('twitter_image', $this->vars) ? 
				$this->twitter_image : '/images/logo_large.png';
$twvideo = array_key_exists('twitter_video', $this->vars) ? 
				$this->twitter_video : null;
$twvideo_height = array_key_exists('twitter_video_height', $this->vars) ? 
				$this->twitter_video_height : null;
$twvideo_width = array_key_exists('twitter_video_width', $this->vars) ? 
				$this->twitter_video_width : null;
$twcard = array_key_exists('twitter_card', $this->vars) ? 
				$this->twitter_card : 'summary';
$twdescription = array_key_exists('twitter_description', $this->vars) ? 
				$this->twitter_description : 'Iowa Environmental Mesonet of Iowa State University';
?>
<!DOCTYPE html>
<html lang="en">
  <head>
    <?php echo $refresh; ?>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title><?php echo $title; ?></title>
    <meta name="description" content="Iowa State University, Iowa Environmental Mesonet">
    <meta name="author" content="daryl herzmann akrherz@iastate.edu">

    <!-- NB: we are stuck with FA 4.7.0 due to iastate theme -->
    <link href="/vendor/fa/4.7.0/css/font-awesome.min.css" rel="stylesheet">
    <link href="/vendor/iastate-v2.0.13/css/iastate.min.css" rel="stylesheet">
    <link href="/css/bootstrap-override.css" rel="stylesheet">
 
    <!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script src="/vendor/html5shiv/3.7.3/html5shiv.min.js"></script>
      <script src="/vendor/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
	<!-- Any page specific headextra content here -->
	<?php echo $headextra; ?>

	<!-- Essential Social Tags -->
	<meta property="og:title" content="<?php echo $title; ?>">
	<meta property="og:description" content="<?php echo $twdescription; ?>">
	<meta property="og:image" content="https://mesonet.agron.iastate.edu<?php echo $twimage; ?>">
	<meta property="og:url" content="https://mesonet.agron.iastate.edu<?php echo htmlentities($_SERVER["REQUEST_URI"]); ?>">
	<?php if (!empty($twvideo)){ 
        echo <<<EOM
    <meta property="og:video" content="https://mesonet.agron.iastate.edu{$twvideo}">
    <meta property="og:video:type" content="video/mp4">
    <meta property="og:video:width" content="{$twvideo_width}">
    <meta property="og:video:height" content="{$twvideo_height}">

EOM;
    } ?>
    <meta name="twitter:card" content="<?php echo $twcard; ?>">

	<!-- Non-essential -->
	<meta name="twitter:creator" content="@akrherz">
    <!-- Le fav and touch icons -->
    <link rel="shortcut icon" href="/favicon.ico">
    <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/apple-touch-icon-precomposed.png">
    <link rel="apple-touch-icon-precomposed" sizes="114x114" href="/apple-touch-icon-precomposed.png">
    <link rel="apple-touch-icon-precomposed" sizes="72x72" href="/apple-touch-icon-precomposed.png">
    <link rel="apple-touch-icon-precomposed" href="/apple-touch-icon-precomposed.png">
  </head>

  <body<?php echo $bodyextra; ?>>
